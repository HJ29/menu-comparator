import{u as xe,a as _e,Q,R as qe,b as Se,c as Fe}from"./QBtn-CixNDmC5.js";import{a as c,c as re,g as j,h as b,y as Y,j as ke,r as $,o as ue,w as D,z as Be,i as ne,f as se,A as we,B as Ve,C as be,k as Ae,D as $e,E as Re,F as M,T as Ee,G as je,H as Oe,e as T,l as De,b as ze,I as Ie,s as Pe,v as Te,t as Ne,J as Me,x as ee}from"./index-DtruxWyE.js";import{b as Le,d as Qe,h as L}from"./dom-D90fPkry.js";const ye={dark:{type:Boolean,default:null}};function Ce(e,t){return c(()=>e.dark===null?t.dark.isActive:e.dark)}const He={xs:8,sm:10,md:14,lg:20,xl:24},Ke=re({name:"QChip",props:{...ye,...xe,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:l}}=j(),s=Ce(e,l),d=_e(e,He),v=c(()=>e.selected===!0||e.icon!==void 0),x=c(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),w=c(()=>e.iconRemove||l.iconSet.chip.remove),S=c(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),p=c(()=>{const a=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(a?` text-${a} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(S.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),u=c(()=>{const a=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},_={...a,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||l.lang.label.remove};return{chip:a,remove:_}});function g(a){a.keyCode===13&&C(a)}function C(a){e.disable||(n("update:selected",!e.selected),n("click",a))}function f(a){(a.keyCode===void 0||a.keyCode===13)&&(Y(a),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function m(){const a=[];S.value===!0&&a.push(b("div",{class:"q-focus-helper"})),v.value===!0&&a.push(b(Q,{class:"q-chip__icon q-chip__icon--left",name:x.value}));const _=e.label!==void 0?[b("div",{class:"ellipsis"},[e.label])]:void 0;return a.push(b("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Qe(t.default,_))),e.iconRight&&a.push(b(Q,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&a.push(b(Q,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:w.value,...u.value.remove,onClick:f,onKeyup:f})),a}return()=>{if(e.modelValue===!1)return;const a={class:p.value,style:d.value};return S.value===!0&&Object.assign(a,u.value.chip,{onClick:C,onKeyup:g}),Le("div",a,m(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[qe,e.ripple]])}}});let te,J=0;const R=new Array(256);for(let e=0;e<256;e++)R[e]=(e+256).toString(16).substring(1);const Ue=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let l=t;l>0;l--)n.push(Math.floor(Math.random()*256));return n}})(),ce=4096;function oe(){(te===void 0||J+16>ce)&&(J=0,te=Ue(ce));const e=Array.prototype.slice.call(te,J,J+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,R[e[0]]+R[e[1]]+R[e[2]]+R[e[3]]+"-"+R[e[4]]+R[e[5]]+"-"+R[e[6]]+R[e[7]]+"-"+R[e[8]]+R[e[9]]+"-"+R[e[10]]+R[e[11]]+R[e[12]]+R[e[13]]+R[e[14]]+R[e[15]]}function Je(e){return e??null}function de(e,t){return e??(t===!0?`f_${oe()}`:null)}function We({getValue:e,required:t=!0}={}){if(ke.value===!0){const n=e!==void 0?$(Je(e())):$(null);return t===!0&&n.value===null&&ue(()=>{n.value=`f_${oe()}`}),e!==void 0&&D(e,l=>{n.value=de(l,t)}),n}return e!==void 0?c(()=>de(e(),t)):$(`f_${oe()}`)}const fe=/^on[A-Z]/;function Ze(){const{attrs:e,vnode:t}=j(),n={listeners:$({}),attributes:$({})};function l(){const s={},d={};for(const v in e)v!=="class"&&v!=="style"&&fe.test(v)===!1&&(s[v]=e[v]);for(const v in t.props)fe.test(v)===!0&&(d[v]=t.props[v]);n.attributes.value=s,n.listeners.value=d}return Be(l),l(),n}function Xe({validate:e,resetValidation:t,requiresQForm:n}){const l=ne(we,!1);if(l!==!1){const{props:s,proxy:d}=j();Object.assign(d,{validate:e,resetValidation:t}),D(()=>s.disable,v=>{v===!0?(typeof t=="function"&&t(),l.unbindComponent(d)):l.bindComponent(d)}),ue(()=>{s.disable!==!0&&l.bindComponent(d)}),se(()=>{s.disable!==!0&&l.unbindComponent(d)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const ve=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,me=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,ge=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,W=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Z=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,le={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>ve.test(e),hexaColor:e=>me.test(e),hexOrHexaColor:e=>ge.test(e),rgbColor:e=>W.test(e),rgbaColor:e=>Z.test(e),rgbOrRgbaColor:e=>W.test(e)||Z.test(e),hexOrRgbColor:e=>ve.test(e)||W.test(e),hexaOrRgbaColor:e=>me.test(e)||Z.test(e),anyColor:e=>ge.test(e)||W.test(e)||Z.test(e)},Ye=[!0,!1,"ondemand"],Ge={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>Ye.includes(e)}};function et(e,t){const{props:n,proxy:l}=j(),s=$(!1),d=$(null),v=$(!1);Xe({validate:m,resetValidation:f});let x=0,w;const S=c(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),p=c(()=>n.disable!==!0&&S.value===!0&&t.value===!1),u=c(()=>n.error===!0||s.value===!0),g=c(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:d.value);D(()=>n.modelValue,()=>{v.value=!0,p.value===!0&&n.lazyRules===!1&&a()});function C(){n.lazyRules!=="ondemand"&&p.value===!0&&v.value===!0&&a()}D(()=>n.reactiveRules,_=>{_===!0?w===void 0&&(w=D(()=>n.rules,C,{immediate:!0,deep:!0})):w!==void 0&&(w(),w=void 0)},{immediate:!0}),D(()=>n.lazyRules,C),D(e,_=>{_===!0?v.value=!0:p.value===!0&&n.lazyRules!=="ondemand"&&a()});function f(){x++,t.value=!1,v.value=!1,s.value=!1,d.value=null,a.cancel()}function m(_=n.modelValue){if(n.disable===!0||S.value===!1)return!0;const i=++x,k=t.value!==!0?()=>{v.value=!0}:()=>{},V=(r,q)=>{r===!0&&k(),s.value=r,d.value=q||null,t.value=!1},E=[];for(let r=0;r<n.rules.length;r++){const q=n.rules[r];let B;if(typeof q=="function"?B=q(_,le):typeof q=="string"&&le[q]!==void 0&&(B=le[q](_)),B===!1||typeof B=="string")return V(!0,B),!1;B!==!0&&B!==void 0&&E.push(B)}return E.length===0?(V(!1),!0):(t.value=!0,Promise.all(E).then(r=>{if(r===void 0||Array.isArray(r)===!1||r.length===0)return i===x&&V(!1),!0;const q=r.find(B=>B===!1||typeof B=="string");return i===x&&V(q!==void 0,q),q===void 0},r=>(i===x&&(console.error(r),V(!0)),!1)))}const a=Ve(m,0);return se(()=>{w!==void 0&&w(),a.cancel()}),Object.assign(l,{resetValidation:f,validate:m}),be(l,"hasError",()=>u.value),{isDirtyModel:v,hasRules:S,hasError:u,errorMessage:g,validate:m,resetValidation:f}}let ie=[],tt=[];function lt(e){tt.length===0?e():ie.push(e)}function nt(e){ie=ie.filter(t=>t!==e)}function ae(e){return e!=null&&(""+e).length!==0}const ot={...ye,...Ge,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},it=["update:modelValue","clear","focus","blur"];function at({requiredForAttr:e=!0,tagProp:t,changeEvent:n=!1}={}){const{props:l,proxy:s}=j(),d=Ce(l,s.$q),v=We({required:e,getValue:()=>l.for});return{requiredForAttr:e,changeEvent:n,tag:t===!0?c(()=>l.tag):{value:"label"},isDark:d,editable:c(()=>l.disable!==!0&&l.readonly!==!0),innerLoading:$(!1),focused:$(!1),hasPopupOpen:!1,splitAttrs:Ze(),targetUid:v,rootRef:$(null),targetRef:$(null),controlRef:$(null)}}function rt(e){const{props:t,emit:n,slots:l,attrs:s,proxy:d}=j(),{$q:v}=d;let x=null;e.hasValue===void 0&&(e.hasValue=c(()=>ae(t.modelValue))),e.emitValue===void 0&&(e.emitValue=o=>{n("update:modelValue",o)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:F,onFocusout:A}),Object.assign(e,{clearValue:O,onControlFocusin:F,onControlFocusout:A,focus:q}),e.computedCounter===void 0&&(e.computedCounter=c(()=>{if(t.counter!==!1){const o=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,h=t.maxlength!==void 0?t.maxlength:t.maxValues;return o+(h!==void 0?" / "+h:"")}}));const{isDirtyModel:w,hasRules:S,hasError:p,errorMessage:u,resetValidation:g}=et(e.focused,e.innerLoading),C=e.floatingLabel!==void 0?c(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):c(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),f=c(()=>t.bottomSlots===!0||t.hint!==void 0||S.value===!0||t.counter===!0||t.error!==null),m=c(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),a=c(()=>`q-field row no-wrap items-start q-field--${m.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(C.value===!0?" q-field--float":"")+(i.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(p.value===!0?" q-field--error":"")+(p.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&f.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),_=c(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(p.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),i=c(()=>t.labelSlot===!0||t.label!==void 0),k=c(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&p.value!==!0?` text-${t.labelColor}`:"")),V=c(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:C.value,modelValue:t.modelValue,emitValue:e.emitValue})),E=c(()=>{const o={};return e.targetUid.value&&(o.for=e.targetUid.value),t.disable===!0&&(o["aria-disabled"]="true"),o});function r(){const o=document.activeElement;let h=e.targetRef!==void 0&&e.targetRef.value;h&&(o===null||o.id!==e.targetUid.value)&&(h.hasAttribute("tabindex")===!0||(h=h.querySelector("[tabindex]")),h&&h!==o&&h.focus({preventScroll:!0}))}function q(){lt(r)}function B(){nt(r);const o=document.activeElement;o!==null&&e.rootRef.value.contains(o)&&o.blur()}function F(o){x!==null&&(clearTimeout(x),x=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",o))}function A(o,h){x!==null&&clearTimeout(x),x=setTimeout(()=>{x=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",o)),h!==void 0&&h())})}function O(o){Y(o),v.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),e.changeEvent===!0&&n("change",null),n("clear",t.modelValue),Ae(()=>{const h=w.value;g(),w.value=h})}function H(o){[13,32].includes(o.keyCode)&&O(o)}function K(){const o=[];return l.prepend!==void 0&&o.push(b("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:M},l.prepend())),o.push(b("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},z())),p.value===!0&&t.noErrorIcon===!1&&o.push(I("error",[b(Q,{name:v.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?o.push(I("inner-loading-append",l.loading!==void 0?l.loading():[b(Se,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&o.push(I("inner-clearable-append",[b(Q,{class:"q-field__focusable-action",name:t.clearIcon||v.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":v.lang.label.clear,onKeyup:H,onClick:O})])),l.append!==void 0&&o.push(b("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:M},l.append())),e.getInnerAppend!==void 0&&o.push(I("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&o.push(e.getControlChild()),o}function z(){const o=[];return t.prefix!==void 0&&t.prefix!==null&&o.push(b("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&o.push(e.getShadowControl()),e.getControl!==void 0?o.push(e.getControl()):l.rawControl!==void 0?o.push(l.rawControl()):l.control!==void 0&&o.push(b("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},l.control(V.value))),i.value===!0&&o.push(b("div",{class:k.value},L(l.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&o.push(b("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),o.concat(L(l.default))}function G(){let o,h;p.value===!0?u.value!==null?(o=[b("div",{role:"alert"},u.value)],h=`q--slot-error-${u.value}`):(o=L(l.error),h="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(o=[b("div",t.hint)],h=`q--slot-hint-${t.hint}`):(o=L(l.hint),h="q--slot-hint"));const P=t.counter===!0||l.counter!==void 0;if(t.hideBottomSpace===!0&&P===!1&&o===void 0)return;const U=b("div",{key:h,class:"q-field__messages col"},o);return b("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:M},[t.hideBottomSpace===!0?U:b(Ee,{name:"q-transition--field-message"},()=>U),P===!0?b("div",{class:"q-field__counter"},l.counter!==void 0?l.counter():e.computedCounter.value):null])}function I(o,h){return h===null?null:b("div",{key:o,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},h)}let y=!1;return $e(()=>{y=!0}),Re(()=>{y===!0&&t.autofocus===!0&&d.focus()}),t.autofocus===!0&&ue(()=>{d.focus()}),se(()=>{x!==null&&clearTimeout(x)}),Object.assign(d,{focus:q,blur:B}),function(){const h=e.getControl===void 0&&l.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...E.value}:E.value;return b(e.tag.value,{ref:e.rootRef,class:[a.value,s.class],style:s.style,...h},[l.before!==void 0?b("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:M},l.before()):null,b("div",{class:"q-field__inner relative-position col self-stretch"},[b("div",{ref:e.controlRef,class:_.value,tabindex:-1,...e.controlEvents},K()),f.value===!0?G():null]),l.after!==void 0?b("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:M},l.after()):null])}}const ut={name:String};function st(e){return c(()=>e.name||e.for)}function N(e,t,n,l){const s=[];return e.forEach(d=>{l(d)===!0?s.push(d):t.push({failedPropValidation:n,file:d})}),s}function X(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Y(e)}const ct={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},dt=["rejected"];function ft({editable:e,dnd:t,getFileInput:n,addFilesToQueue:l}){const{props:s,emit:d,proxy:v}=j(),x=$(null),w=c(()=>s.accept!==void 0?s.accept.split(",").map(i=>(i=i.trim(),i==="*"?"*/":(i.endsWith("/*")&&(i=i.slice(0,i.length-1)),i.toUpperCase()))):null),S=c(()=>parseInt(s.maxFiles,10)),p=c(()=>parseInt(s.maxTotalSize,10));function u(i){if(e.value)if(i!==Object(i)&&(i={target:null}),i.target!==null&&i.target.matches('input[type="file"]')===!0)i.clientX===0&&i.clientY===0&&je(i);else{const k=n();k&&k!==i.target&&k.click(i)}}function g(i){e.value&&i&&l(null,i)}function C(i,k,V,E){let r=Array.from(k||i.target.files);const q=[],B=()=>{q.length!==0&&d("rejected",q)};if(s.accept!==void 0&&w.value.indexOf("*/")===-1&&(r=N(r,q,"accept",F=>w.value.some(A=>F.type.toUpperCase().startsWith(A)||F.name.toUpperCase().endsWith(A))),r.length===0))return B();if(s.maxFileSize!==void 0){const F=parseInt(s.maxFileSize,10);if(r=N(r,q,"max-file-size",A=>A.size<=F),r.length===0)return B()}if(s.multiple!==!0&&r.length!==0&&(r=[r[0]]),r.forEach(F=>{F.__key=F.webkitRelativePath+F.lastModified+F.name+F.size}),E===!0){const F=V.map(A=>A.__key);r=N(r,q,"duplicate",A=>F.includes(A.__key)===!1)}if(r.length===0)return B();if(s.maxTotalSize!==void 0){let F=E===!0?V.reduce((A,O)=>A+O.size,0):0;if(r=N(r,q,"max-total-size",A=>(F+=A.size,F<=p.value)),r.length===0)return B()}if(typeof s.filter=="function"){const F=s.filter(r);r=N(r,q,"filter",A=>F.includes(A))}if(s.maxFiles!==void 0){let F=E===!0?V.length:0;if(r=N(r,q,"max-files",()=>(F++,F<=S.value)),r.length===0)return B()}if(B(),r.length!==0)return r}function f(i){X(i),t.value!==!0&&(t.value=!0)}function m(i){Y(i),(i.relatedTarget!==null||Oe.is.safari!==!0?i.relatedTarget!==x.value:document.elementsFromPoint(i.clientX,i.clientY).includes(x.value)===!1)===!0&&(t.value=!1)}function a(i){X(i);const k=i.dataTransfer.files;k.length!==0&&l(null,k),t.value=!1}function _(i){if(t.value===!0)return b("div",{ref:x,class:`q-${i}__dnd absolute-full`,onDragenter:X,onDragover:X,onDragleave:m,onDrop:a})}return Object.assign(v,{pickFiles:u,addFiles:g}),{pickFiles:u,addFiles:g,onDragover:f,onDragleave:m,processFiles:C,getDndNode:_,maxFilesNumber:S,maxTotalSizeNumber:p}}function vt(e,t){function n(){const l=e.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(l)===l&&("length"in l?Array.from(l):[l]).forEach(d=>{s.items.add(d)}),{files:s.files}}catch{return{files:void 0}}}return c(n)}const he=["B","KB","MB","GB","TB","PB"];function mt(e,t=1){let n=0;for(;parseInt(e,10)>=1024&&n<he.length-1;)e/=1024,++n;return`${e.toFixed(t)}${he[n]}`}const pe=re({name:"QFile",inheritAttrs:!1,props:{...ot,...ut,...ct,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...it,...dt],setup(e,{slots:t,emit:n,attrs:l}){const{proxy:s}=j(),d=at(),v=$(null),x=$(!1),w=st(e),{pickFiles:S,onDragover:p,onDragleave:u,processFiles:g,getDndNode:C}=ft({editable:d.editable,dnd:x,getFileInput:H,addFilesToQueue:K}),f=vt(e),m=c(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),a=c(()=>ae(m.value)),_=c(()=>m.value.map(y=>y.name).join(", ")),i=c(()=>mt(m.value.reduce((y,o)=>y+o.size,0))),k=c(()=>({totalSize:i.value,filesNumber:m.value.length,maxFiles:e.maxFiles})),V=c(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:w.value,...l,id:d.targetUid.value,disabled:d.editable.value!==!0})),E=c(()=>"q-file q-field--auto-height"+(x.value===!0?" q-file--dnd":"")),r=c(()=>e.multiple===!0&&e.append===!0);function q(y){const o=m.value.slice();o.splice(y,1),F(o)}function B(y){const o=m.value.indexOf(y);o!==-1&&q(o)}function F(y){n("update:modelValue",e.multiple===!0?y:y[0])}function A(y){y.keyCode===13&&M(y)}function O(y){(y.keyCode===13||y.keyCode===32)&&S(y)}function H(){return v.value}function K(y,o){const h=g(y,o,m.value,r.value),P=H();P!=null&&(P.value=""),h!==void 0&&((e.multiple===!0?e.modelValue&&h.every(U=>m.value.includes(U)):e.modelValue===h[0])||F(r.value===!0?m.value.concat(h):h))}function z(){return[b("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function G(){if(t.file!==void 0)return m.value.length===0?z():m.value.map((o,h)=>t.file({index:h,file:o,ref:this}));if(t.selected!==void 0)return m.value.length===0?z():t.selected({files:m.value,ref:this});if(e.useChips===!0)return m.value.length===0?z():m.value.map((o,h)=>b(Ke,{key:"file-"+h,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{q(h)}},()=>b("span",{class:"ellipsis",textContent:o.name})));const y=e.displayValue!==void 0?e.displayValue:_.value;return y.length!==0?[b("div",{class:e.inputClass,style:e.inputStyle,textContent:y})]:z()}function I(){const y={ref:v,...V.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:K};return e.multiple===!0&&(y.multiple=!0),b("input",y)}return Object.assign(d,{fieldClass:E,emitValue:F,hasValue:a,inputRef:v,innerValue:m,floatingLabel:c(()=>a.value===!0||ae(e.displayValue)),computedCounter:c(()=>{if(e.counterLabel!==void 0)return e.counterLabel(k.value);const y=e.maxFiles;return`${m.value.length}${y!==void 0?" / "+y:""} (${i.value})`}),getControlChild:()=>C("file"),getControl:()=>{const y={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(y,{onDragover:p,onDragleave:u,onKeydown:A,onKeyup:O}),b("div",y,[I()].concat(G()))}}),Object.assign(s,{removeAtIndex:q,removeFile:B,getNativeElement:()=>v.value}),be(s,"nativeEl",()=>v.value),rt(d)}}),gt=re({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=j(),l=ne(De,T);if(l===T)return console.error("QPage needs to be a deep child of QLayout"),T;if(ne(ze,T)===T)return console.error("QPage needs to be child of QPageContainer"),T;const d=c(()=>{const x=(l.header.space===!0?l.header.size:0)+(l.footer.space===!0?l.footer.size:0);if(typeof e.styleFn=="function"){const w=l.isContainer.value===!0?l.containerHeight.value:n.screen.height;return e.styleFn(x,w)}return{minHeight:l.isContainer.value===!0?l.containerHeight.value-x+"px":n.screen.height===0?x!==0?`calc(100vh - ${x}px)`:"100vh":n.screen.height-x+"px"}}),v=c(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>b("main",{class:v.value,style:d.value},L(t.default))}}),ht={class:"column q-gutter-y-sm",style:{minWidth:"240px"}},Ct=Ie({__name:"IndexPage",setup(e){const t=$(),n=$();function l(S){return new Promise(p=>{if(!S)throw new Error("No File");const u=new FileReader;u.onload=g=>{const C=g.target?.result,f=s(C);p(f)},u.readAsText(S)})}function s(S){const p=S.split(`
`).map(g=>g.trim()).filter(g=>g),u=p.shift().split(",");return p.map(g=>{const C=g.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(f=>f.replace(/^"|"$/g,""));return u.reduce((f,m,a)=>(f[m]=C[a],f),{})})}async function d(){const S=await l(t.value),p=await l(n.value);x({newJson:S,oldJson:p})}function v(S){const p=S.reduce((u,g)=>{const C=`${g.product_id}|${g.product_sku}|${g.product_name}`.replaceAll('"',""),f=`${g.addon_category_id}|${g.addon_category}`.replaceAll('"',""),m=`${g.addon_id}|${g.addon_sku}|${g.addon_name}`.replaceAll('"',"");return u[C]||(u[C]={}),u[C][f]||(u[C][f]=[]),u[C][f].includes(m)||(u[C][f].push(m),u[C][f].sort((a,_)=>a.localeCompare(_))),u},{});return Object.keys(p).reduce((u,g)=>{const C=p[g];return Object.keys(C).forEach(f=>{u[f]||(u[f]=[]);const m=[f,...C[f]].join("|");let a=u[f].findIndex(_=>_.uniqueId===m);a<0&&(a=u[f].length,u[f].push({uniqueId:m,id:f,no:a,addons:C[f],products:[]})),u[f][a].products.push(g)}),u},{})}function x({newJson:S,oldJson:p}){const u=v(p),g=v(S),C=[["status","group","no","addons","addon count","products","product count"]],f=[];Object.keys(g).forEach(_=>{const i=g[_],k=u[_];i.forEach(V=>{const E=k?.find(q=>q.uniqueId===V.uniqueId),r=[V.id,`${V.no}`,`"${V.addons.join(`
`)}"`,V.addons.length,`"${V.products.join(`
`)}"`,V.products.length];E?f.includes(E.uniqueId)||(f.push(E.uniqueId),r.unshift("REMAIN")):r.unshift("UPDATE"),C.push(r)})}),Object.keys(u).forEach(_=>{u[_].forEach(k=>{f.includes(k.uniqueId)||C.push(["DELETE",k.id,k.no,`"${k.addons.join(`
`)}"`,k.addons.length,`"${k.products.join(`
`)}"`,k.products.length])})});const m=["UPDATE","DELETE","REMAIN"];C.sort((_,i)=>m.indexOf(`${_[0]}`)-m.indexOf(`${i[0]}`)||`${_[1]}`.localeCompare(`${i[1]}`)||Number(_[2])-Number(i[2]));const a=C.map(_=>Object.values(_).join(",")).join(`
`);w(a)}function w(S){const p=new Blob([S],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(p),g=document.createElement("a");g.setAttribute("href",u),g.setAttribute("download","compare-result.csv"),document.body.appendChild(g),g.click(),document.body.removeChild(g)}return(S,p)=>(Te(),Pe(gt,{class:"row items-center justify-center"},{default:Ne(()=>[Me("div",ht,[ee(pe,{outlined:"",modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=u=>t.value=u),label:"New File",dense:"",accept:".csv"},null,8,["modelValue"]),ee(pe,{outlined:"",modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=u=>n.value=u),label:"Old File",dense:"",accept:".csv"},null,8,["modelValue"]),ee(Fe,{color:"white","text-color":"black",label:"Download",onClick:d})])]),_:1}))}});export{Ct as default};
